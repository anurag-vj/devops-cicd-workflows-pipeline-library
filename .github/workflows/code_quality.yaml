name: code_quality_checks

on:
  workflow_call:
    inputs:
      job_name:
        required: true
        type: string
        default: 'Code Quality and Linting'
      runs_on:
        required: true
        type: string
        default: 'ubuntu-latest'
      node_version:
        required: true
        type: string
      cache:
        required: true
        type: string
    secrets:
      GITHUB_TOKEN:
        required: true

jobs:
  code_quality_checks:
    name: ${{ inputs.job_name }}
    runs-on: ${{ inputs.runs_on }}
    steps:
      - name: checkout repository
        uses: actions/checkout@v4

      - name: Setup Biome
        uses: biomejs/setup-biome@v2
        with:
          version: latest

      - name: JavaScript Linting (Biome)
        run: biome ci ./src/
        continue-on-error: true

      - name: Setup Node.js
        uses: actions/setup-node@v6
        with:
          node-version: ${{ inputs.node_version }}
          cache: ${{ inputs.cache }}

      - name: Super-Linter
        uses: super-linter/super-linter@v7.1.0
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}   
          VALIDATE_CSS: true
          VALIDATE_JAVASCRIPT_ES: true
          VALIDATE_JSON: true
          VALIDATE_MARKDOWN: true
          VALIDATE_YAML: true
        continue-on-error: true
